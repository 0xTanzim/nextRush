MyExpress git:(dev/refactor) pnpm benchmark

> nextrush@1.3.0 benchmark /mnt/storage/project/MyExpress
> ts-node scripts/benchmark.ts

🚀 Starting NextRush Ultimate Performance Benchmark Suite...

🖥️  System Information:
   Node.js Version: v24.4.1
   V8 Version: 13.6.233.10-node.17
   CPU: Intel(R) Core(TM) i5-8300H CPU @ 2.30GHz (8 cores)
   Total Memory: 14.97 GB
   Platform: linux 6.14.0-24-generic
   Architecture: x64
   TypeScript Version: 5.8.3

🔌 Installing Router plugin...
🛣️  Router plugin installed - using Application built-in routing
✅ Router plugin installed successfully
🔌 Installing ProfessionalStatic plugin...
✅ ProfessionalStatic plugin installed successfully
🔌 Installing Middleware plugin...
🔧 Middleware plugin methods installed
✅ Middleware plugin installed successfully
🔌 Installing WebSocket plugin...
✅ WebSocket plugin installed successfully
🔌 Installing Template plugin...
🎨 Template plugin installed - Ultimate Template Engine ready
✅ Template plugin installed successfully
🔌 Installing Auth plugin...
✅ Auth plugin installed successfully
🔌 Installing Metrics plugin...
✅ Metrics plugin installed successfully
🔌 Installing CORS plugin...
✅ CORS plugin installed successfully
🔌 Installing RateLimiter plugin...
✅ RateLimiter plugin installed successfully
🔌 Installing BodyParser plugin...
📦 Body parser auto-parsing middleware installed
✅ BodyParser plugin installed successfully
🔌 Installing Validation plugin...
✅ Validation plugin installed successfully
🔌 Installing EventDriven plugin...
✅ EventDriven plugin installed successfully
🚀 Starting Router plugin...
🛣️  Router plugin started - Application routing ready
🚀 Starting ProfessionalStatic plugin...
🚀 Starting Middleware plugin...
🚀 Starting WebSocket plugin...
🚀 Starting Template plugin...
🚀 Starting Auth plugin...
🚀 Starting Metrics plugin...
🚀 Starting CORS plugin...
🚀 Starting RateLimiter plugin...
🚀 Starting BodyParser plugin...
🚀 Starting Validation plugin...
🚀 Starting EventDriven plugin...
✅ NextRush test server configured
🚀 NextRush server listening on port 3000
🚀 Test server running on port 3000
🔥 Running warm-up phase...
(node:244406) [DEP0169] DeprecationWarning: `url.parse()` behavior is not standardized and prone to errors that have security implications. Use the WHATWG URL API instead. CVEs are not issued for `url.parse()` vulnerabilities.
(Use `node --trace-deprecation ...` to show where the warning was created)
✅ Warm-up completed

📈 Benchmarking simple route...
📈 Benchmarking JSON response...
📈 Benchmarking middleware stack...
📈 Benchmarking parameter parsing...
📈 Benchmarking concurrent requests...
📈 Benchmarking error handling...
📈 Benchmarking large payload...

🌪️ Running Stress Tests...
   Testing with 50 concurrent users...
   Testing with 100 concurrent users...
   Testing with 200 concurrent users...

🆚 Running Framework Comparisons...
   (Note: Framework comparison requires installing Express and Fastify)

📊 NextRush Performance Benchmark Results:

┌─────────┬───────────────────────────┬─────────┬──────────────────┬──────────────────┬───────────────────┬────────┐
│ (index) │ Test                      │ Req/sec │ Avg Latency (ms) │ P99 Latency (ms) │ Throughput (MB/s) │ Errors │
├─────────┼───────────────────────────┼─────────┼──────────────────┼──────────────────┼───────────────────┼────────┤
│ 0       │ 'Simple Route'            │ '1280'  │ '0.78'           │ '1.68'           │ '0.01'            │ 0      │
│ 1       │ 'JSON Response'           │ '1620'  │ '0.62'           │ '0.89'           │ '0.08'            │ 0      │
│ 2       │ 'Middleware Stack'        │ '1680'  │ '0.59'           │ '0.90'           │ '0.03'            │ 0      │
│ 3       │ 'Parameter Parsing'       │ '1660'  │ '0.60'           │ '0.86'           │ '0.03'            │ 0      │
│ 4       │ 'Concurrent Load (c=10)'  │ '2016'  │ '3.70'           │ '13.85'          │ '0.02'            │ 0      │
│ 5       │ 'Concurrent Load (c=50)'  │ '2256'  │ '15.55'          │ '34.25'          │ '0.02'            │ 0      │
│ 6       │ 'Concurrent Load (c=100)' │ '2547'  │ '27.05'          │ '59.65'          │ '0.03'            │ 0      │
│ 7       │ 'Error Handling'          │ '1938'  │ '0.52'           │ '0.76'           │ '0.04'            │ 0      │
│ 8       │ 'Large Payload'           │ '1717'  │ '0.58'           │ '0.77'           │ '16.79'           │ 0      │
└─────────┴───────────────────────────┴─────────┴──────────────────┴──────────────────┴───────────────────┴────────┘

🧠 Memory Usage Analysis:

┌─────────┬───────────────────────────┬────────────────┬─────────────┬───────────┐
│ (index) │ Test                      │ Peak Heap (MB) │ Leaked (MB) │ GC Pauses │
├─────────┼───────────────────────────┼────────────────┼─────────────┼───────────┤
│ 0       │ 'Simple Route'            │ '169.72'       │ '91.86'     │ 0         │
│ 1       │ 'JSON Response'           │ '262.08'       │ '85.65'     │ 0         │
│ 2       │ 'Middleware Stack'        │ '348.25'       │ '45.08'     │ 0         │
│ 3       │ 'Parameter Parsing'       │ '393.70'       │ '46.05'     │ 0         │
│ 4       │ 'Concurrent Load (c=10)'  │ '440.13'       │ '-272.98'   │ 0         │
│ 5       │ 'Concurrent Load (c=50)'  │ '167.67'       │ '57.26'     │ 0         │
│ 6       │ 'Concurrent Load (c=100)' │ '225.39'       │ '27.99'     │ 0         │
│ 7       │ 'Error Handling'          │ '253.75'       │ '22.51'     │ 0         │
│ 8       │ 'Large Payload'           │ '276.50'       │ '3.31'      │ 0         │
└─────────┴───────────────────────────┴────────────────┴─────────────┴───────────┘

💻 CPU Usage Analysis:

┌─────────┬───────────────────────────┬─────────────────────┬───────────────┐
│ (index) │ Test                      │ Total CPU Time (ms) │ CPU Usage (%) │
├─────────┼───────────────────────────┼─────────────────────┼───────────────┤
│ 0       │ 'Simple Route'            │ '2022.93'           │ '129.45'      │
│ 1       │ 'JSON Response'           │ '1554.94'           │ '125.96'      │
│ 2       │ 'Middleware Stack'        │ '1183.26'           │ '132.56'      │
│ 3       │ 'Parameter Parsing'       │ '1116.73'           │ '123.55'      │
│ 4       │ 'Concurrent Load (c=10)'  │ '1540.12'           │ '155.24'      │
│ 5       │ 'Concurrent Load (c=50)'  │ '1452.73'           │ '163.85'      │
│ 6       │ 'Concurrent Load (c=100)' │ '975.51'            │ '124.21'      │
│ 7       │ 'Error Handling'          │ '586.79'            │ '113.74'      │
│ 8       │ 'Large Payload'           │ '324.61'            │ '111.47'      │
└─────────┴───────────────────────────┴─────────────────────┴───────────────┘

🌪️ Stress Test Results:

┌─────────┬─────────────┬─────────┬────────────────┬──────────────────┬──────────────────┬───────────────┐
│ (index) │ Concurrency │ Req/sec │ Error Rate (%) │ P99 Latency (ms) │ Peak Memory (MB) │ CPU Usage (%) │
├─────────┼─────────────┼─────────┼────────────────┼──────────────────┼──────────────────┼───────────────┤
│ 0       │ 50          │ '2723'  │ '0.00'         │ '22.45'          │ '279.93'         │ '115.86'      │
│ 1       │ 100         │ '2775'  │ '0.00'         │ '46.33'          │ '354.11'         │ '121.77'      │
│ 2       │ 200         │ '2667'  │ '0.00'         │ '99.60'          │ '429.23'         │ '127.18'      │
└─────────┴─────────────┴─────────┴────────────────┴──────────────────┴──────────────────┴───────────────┘

🆚 Framework Comparison:

┌─────────┬───────────┬──────────┬───────┬────────────┬──────────┬──────────────┬────────────────────┐
│ (index) │ framework │ version  │ rps   │ latencyAvg │ memoryMB │ dependencies │ notes              │
├─────────┼───────────┼──────────┼───────┼────────────┼──────────┼──────────────┼────────────────────┤
│ 0       │ 'Express' │ '4.18.2' │ 12000 │ 8.1        │ 55       │ 31           │ 'Simulated result' │
│ 1       │ 'Fastify' │ '4.25.2' │ 35000 │ 2.5        │ 65       │ 15           │ 'Simulated result' │
└─────────┴───────────┴──────────┴───────┴────────────┴──────────┴──────────────┴────────────────────┘

💡 Overall Analysis & Recommendations:

   ⚠️  Performance is moderate. Consider optimizations in routing and middleware processing.
   🔧 Potential memory leaks detected. Investigate heap snapshots.

💾 Benchmark results saved to benchmark-results.json
🛑 NextRush Application closed
🛑 Test server stopped

✅ Benchmark suite completed
